# Sensor Data Storage Service Configuration
# Copy this file to .env and update with your values

# ==========================================
# Kafka Configuration
# ==========================================
# Kafka broker addresses (comma-separated for multiple brokers)
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Topic pattern to subscribe to (regex pattern)
# Examples: ^sensor-data-.*, sensor-data-quad.*, ^sensor-data-quad_ch[1-4]$
KAFKA_TOPIC_PATTERN=^sensor-data-.*

# Consumer group ID for this service
KAFKA_CONSUMER_GROUP=sensor-storage-service

# Auto offset reset policy (earliest, latest, none)
KAFKA_AUTO_OFFSET_RESET=latest

# Enable auto commit of offsets
KAFKA_ENABLE_AUTO_COMMIT=false

# Session timeout in milliseconds
KAFKA_SESSION_TIMEOUT_MS=30000

# Max poll interval in milliseconds
KAFKA_MAX_POLL_INTERVAL_MS=300000

# Max records per poll
KAFKA_MAX_POLL_RECORDS=500

# ==========================================
# Azure Blob Storage Configuration
# ==========================================
# Azure storage account name (leave empty to disable Azure uploads)
AZURE_STORAGE_ACCOUNT=

# Azure storage account key
AZURE_STORAGE_KEY=

# Azure container name for cold storage
AZURE_CONTAINER_NAME=sensor-data-cold-storage

# Max retries for failed uploads
AZURE_MAX_RETRIES=3

# Retry delay in seconds
AZURE_RETRY_DELAY=1

# Max parallel upload workers
AZURE_MAX_WORKERS=4

# Upload chunk size in bytes
AZURE_CHUNK_SIZE=1048576

# ==========================================
# Local Storage Configuration
# ==========================================
# Local storage path for hierarchical data storage
LOCAL_STORAGE_PATH=/data/raw

# Parquet compression algorithm (snappy, lz4, gzip, brotli, zstd, none)
PARQUET_COMPRESSION=lz4

# Partition columns for Parquet files (comma-separated)
PARQUET_PARTITION_COLS=

# Max rows per Parquet file before flushing
MAX_ROWS_PER_FILE=100000

# ==========================================
# Cleanup Service Configuration
# ==========================================
# Enable automatic cleanup of uploaded files
CLEANUP_ENABLED=true

# Age in days before files are eligible for cleanup
CLEANUP_AGE_DAYS=7

# Cleanup check interval in hours
CLEANUP_INTERVAL_HOURS=6

# Dry run mode (true = don't actually delete files)
CLEANUP_DRY_RUN=false

# ==========================================
# API Service Configuration
# ==========================================
# API server host
SERVICE_HOST=0.0.0.0

# API server port
SERVICE_PORT=8080

# Enable debug mode
SERVICE_DEBUG=false

# Number of worker threads
SERVICE_WORKERS=1

# ==========================================
# Logging Configuration
# ==========================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path (optional, defaults to stdout)
LOG_FILE_PATH=/tmp/sensor-storage-service.log

# ==========================================
# Performance Tuning
# ==========================================
# Upload interval in seconds (how often to upload to Azure)
UPLOAD_INTERVAL_SECONDS=1800

# Buffer flush interval in seconds (how often to flush to local storage)
BUFFER_FLUSH_INTERVAL_SECONDS=300

# Aggregation intervals (comma-separated: minute,hour,daily)
AGGREGATION_LEVELS=minute,hour,daily